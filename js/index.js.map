{"version":3,"sources":["src/_helpers.js","src/main.js"],"names":["debounce","fn","time","timeout","_this","this","_arguments","arguments","functionCall","apply","clearTimeout","setTimeout","mq","small","window","matchMedia","medium","large","childIndex","el","Array","from","parentNode","children","indexOf","getUrlParameter","name","replace","regex","results","RegExp","exec","location","search","decodeURIComponent","siteTitle","document","querySelector","cards","querySelectorAll","cardWrapper","getElementById","closeButton","cardDelay","projectCards","getProjectByUrl","filter","item","project","getProjectByElement","element","cardHeight","cardScale","gutter","calculateScale","matches","clientWidth","setWrapperHeight","wrapperHeight","length","style","height","concat","positionCard","card","index","header","hh","y","clientHeight","transform","renderNextLink","nextCard","undefined","nextProject","btnContainer","createElement","classList","add","body","appendChild","nextLink","innerHTML","href","link","addEventListener","e","preventDefault","closeCurrentCard","openCard","fetchProjectInfo","fetch","then","response","text","content","catch","err","console","log","push","stateObj","history","pushState","distanceFromTop","getBoundingClientRect","top","transitionTime","Math","abs","bodyWrapper","transitionDuration","pageYOffset","bodyScrollLock","disableBodyScroll","remove","contains","closeCard","scrollTop","enableBodyScroll","currentCard","defaultHistoryState","title","replaceState","ProjectCard","getAttribute","setUpCards","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","next","done","value","newCard","return","resetCards","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","popStateHandler","event","state","pageLoad","homeBtnHandler"],"mappings":"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","sourcesContent":["\nconst debounce = (fn, time) => {\n  let timeout;\n\n  return function() {\n    const functionCall = () => fn.apply(this, arguments);\n\n    clearTimeout(timeout);\n    timeout = setTimeout(functionCall, time);\n  };\n};\n\nconst mq = {\n  small:  window.matchMedia(\"(min-width: 400px)\"),\n  medium: window.matchMedia(\"(min-width: 700px)\"),\n  large:  window.matchMedia(\"(min-width: 1000px)\")\n};\n\nconst childIndex = (el) => Array.from(el.parentNode.children).indexOf(el);\n\nfunction getUrlParameter(name) {\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  const results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n","\nconst siteTitle = document.querySelector('.site-title');\nconst cards = document.querySelectorAll('.card');\nconst cardWrapper = document.getElementById('card-wrapper');\nconst closeButton = document.getElementById('close-project');\nconst cardDelay = 250;\nconst projectCards = [];\n\nconst getProjectByUrl = () =>\n  projectCards.filter(item => item.project === getUrlParameter('content'))[0];\n\nconst getProjectByElement = element =>\n  projectCards.filter(item => item.el === element)[0];\n\n\nlet cardHeight, cardScale, gutter;\n\nfunction calculateScale() {\n  cardHeight = mq.medium.matches ? 480\n             : mq.small.matches ? 360\n             : 300;\n\n  cardScale = mq.small.matches ? 0.95 : 0.925;\n  gutter = cardWrapper.clientWidth * (1 - cardScale)/2;\n}\n\nfunction setWrapperHeight() {\n  const wrapperHeight = cards.length * (cardHeight + gutter);\n  cardWrapper.style.height = `${wrapperHeight}px`;\n}\n\nfunction positionCard(card) {\n  // console.log('Positioning card');\n  const index = childIndex(card);\n  const header = document.getElementById('header');\n  const hh = header ? header.clientHeight : 0;\n  const y = hh + index * cardHeight;\n  card.style.transform = `scaleX(${cardScale}) translateY(${y + gutter * index}px)`;\n}\n\nfunction renderNextLink(project) {\n  const nextCard = cards[childIndex(project.el) + 1];\n  if (nextCard !== undefined) {\n    const nextProject = getProjectByElement(nextCard);\n\n    const btnContainer = document.createElement('div');\n    btnContainer.classList.add('btn-container');\n    project.body.appendChild(btnContainer);\n\n    const nextLink = document.createElement('a');\n    nextLink.classList.add('btn-next-project');\n    nextLink.innerHTML = 'Next Project';\n    nextLink.href = nextProject.link;\n\n    nextLink.addEventListener('click', (e) => {\n      e.preventDefault();\n      closeCurrentCard();\n      openCard(nextProject, true);\n    });\n\n    btnContainer.appendChild(nextLink);\n  }\n}\n\nfunction fetchProjectInfo(card) {\n  // console.log('Fetching project info');\n  fetch(`./pages/${card.project}.html`).then((response) => {\n    return response.text();\n  }).then((content) => {\n    card.body.innerHTML += content;\n    renderNextLink(card);\n    setTimeout(() => {\n      card.el.classList.add('content-loaded');\n    }, 125);\n  }).catch((err) => {\n    console.log('Fetch Error', err);\n  });\n}\n\nfunction openCard(card, push) {\n  // console.log('Opening card');\n  if (push) {\n    const stateObj = { content: card.project };\n    history.pushState(stateObj, 'project page', card.link);\n  }\n\n  const distanceFromTop = card.el.getBoundingClientRect().top;\n  const transitionTime = Math.abs(distanceFromTop) / 5 + 200;\n  const bodyWrapper = card.el.querySelector('.card-body--outer');\n  card.el.style.transitionDuration = `${transitionTime}ms`;\n  bodyWrapper.style.transitionDuration = `${transitionTime}ms`;\n\n  card.el.classList.add('expanded', 'anim-in');\n  card.el.style.transform = `scaleX(1) translateY(${window.pageYOffset}px)`;\n  card.el.style.top = `-${window.pageYOffset}px`;\n  bodyScrollLock.disableBodyScroll(card.el);\n\n  setTimeout(() => {\n    card.el.classList.remove('anim-in');\n    if (closeButton) {\n      closeButton.classList.add('visible');\n    }\n  }, cardDelay);\n  if (!card.el.classList.contains('content-loaded')) {\n    fetchProjectInfo(card);\n  }\n}\n\nfunction closeCard(card) {\n  if (closeButton) {\n    closeButton.classList.remove('visible');\n  }\n  card.scrollTop = 0;\n  card.classList.add('anim-out');\n  bodyScrollLock.enableBodyScroll(card);\n  positionCard(card);\n  setTimeout(() => {\n    card.classList.remove('expanded', 'anim-out');\n    card.style.top = `0`;\n  }, cardDelay);\n}\n\nfunction closeCurrentCard() {\n  const currentCard = document.querySelector('.card.expanded');\n  if (currentCard) {\n    closeCard(currentCard);\n  }\n}\n\nfunction defaultHistoryState(push) {\n  const stateObj = { content: 'project index' };\n  if (push) {\n    history.pushState(stateObj, document.title, 'index.html');\n  } else {\n    history.replaceState(stateObj, document.title, 'index.html');\n  }\n}\n\nfunction ProjectCard(card) {\n  this.el = card;\n  this.header = card.querySelector('.card-header');\n  this.body = card.querySelector('.card-body--inner');\n  this.project = card.getAttribute('id');\n  this.link = this.header.getAttribute('href');\n\n  this.header.addEventListener('click', (e) => {\n    e.preventDefault();\n    if (!this.el.classList.contains('expanded')) {\n      openCard(this, true);\n    }\n  });\n\n}\n\nfunction setUpCards() {\n  // console.log('Setting up cards');\n  calculateScale();\n  setWrapperHeight();\n  if (!getUrlParameter('content')) {\n    defaultHistoryState();\n  }\n  for (let card of cards) {\n    let newCard = new ProjectCard(card);\n    projectCards.push(newCard);\n    positionCard(card);\n  }\n}\n\nfunction resetCards() {\n  calculateScale();\n  setWrapperHeight();\n  for (let card of cards) {\n    if (!card.classList.contains('expanded')) {\n      positionCard(card);\n    }\n  }\n}\n\nconst popStateHandler = event => {\n  // console.log('Popstate fired!');\n  if (event.state.content === 'project index') {\n    closeCurrentCard();\n  } else if (getUrlParameter('content')) {\n    closeCurrentCard();\n    const project = getProjectByUrl();\n    openCard(project, false);\n  }\n};\n\nfunction pageLoad() {\n  if (window.location.search) {\n    const project = getProjectByUrl();\n    openCard(project, false);\n  }\n}\n\nfunction homeBtnHandler(e) {\n  e.preventDefault();\n  if (getUrlParameter('content') !== '') {\n    closeCurrentCard();\n    defaultHistoryState(true);\n  } else {\n    window.location = 'index.html';\n  }\n}\n\n\nsiteTitle.addEventListener('click', homeBtnHandler);\nwindow.addEventListener('popstate', popStateHandler);\nwindow.addEventListener('load', pageLoad);\n\nwindow.addEventListener('resize', debounce(() => {\n  resetCards();\n}, 100));\n\nsetUpCards();\nsetTimeout(() => {\n  cardWrapper.classList.add('visible');\n  cardWrapper.classList.remove('no-trans');\n}, cardDelay);\n"]}